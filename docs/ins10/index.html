<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/pollerdox/blog/rss.xml" title="Unifi Poller Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/pollerdox/blog/atom.xml" title="Unifi Poller Blog Atom Feed"><title data-react-helmet="true">Final steps | Unifi Poller</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Final steps | Unifi Poller"><meta data-react-helmet="true" name="description" content="This page assume that you have successfully completed the installation of Unifi Poller, Grafana and either InfluxDB or Prometheus."><meta data-react-helmet="true" property="og:description" content="This page assume that you have successfully completed the installation of Unifi Poller, Grafana and either InfluxDB or Prometheus."><meta data-react-helmet="true" property="og:url" content="https://piansom.github.io/pollerdox/docs/ins10"><link data-react-helmet="true" rel="shortcut icon" href="/pollerdox/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://piansom.github.io/pollerdox/docs/ins10"><link rel="stylesheet" href="/pollerdox/styles.21f0090d.css">
<link rel="preload" href="/pollerdox/styles.6490030f.js" as="script">
<link rel="preload" href="/pollerdox/runtime~main.d106c79f.js" as="script">
<link rel="preload" href="/pollerdox/main.5a848fa0.js" as="script">
<link rel="preload" href="/pollerdox/1.bbccf605.js" as="script">
<link rel="preload" href="/pollerdox/2.7155cab2.js" as="script">
<link rel="preload" href="/pollerdox/31.fd0fce12.js" as="script">
<link rel="preload" href="/pollerdox/32.e766ad3f.js" as="script">
<link rel="preload" href="/pollerdox/935f2afb.0213b905.js" as="script">
<link rel="preload" href="/pollerdox/17896441.242c0b92.js" as="script">
<link rel="preload" href="/pollerdox/a7630d7b.21b29e2d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/pollerdox/"><img src="/pollerdox/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/pollerdox/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Unifi Poller</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pollerdox/docs/up1">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/pollerdox/"><img src="/pollerdox/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/pollerdox/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Unifi Poller</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/pollerdox/docs/up1">Docs</a></li><li class="menu__list-item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">UnifiPoller</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pollerdox/docs/up1">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pollerdox/docs/up2">How it works</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pollerdox/docs/up3">FAQs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pollerdox/docs/up4">Easy starting point</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pollerdox/docs/ins1">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pollerdox/docs/ins2">Docker - using docker-compose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pollerdox/docs/ins3">Docker - using command line</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pollerdox/docs/ins4">Docker - FAQs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pollerdox/docs/ins5">Bare metal - FreeBSD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pollerdox/docs/ins6">Bare metal - Linux/MacOS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pollerdox/docs/ins7">Bare metal - Windows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pollerdox/docs/ins8">NAS - Synology</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pollerdox/docs/ins9">Config file and Environment variables</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/pollerdox/docs/ins10">Final steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pollerdox/docs/ins11">Loki</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pollerdox/docs/tro1">Common solutions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pollerdox/docs/tro2">Getting help</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Thanks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pollerdox/docs/thx1">Contributors</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Final steps</h1></header><div class="markdown"><p>This page assume that you have successfully completed the installation of Unifi Poller, Grafana and either InfluxDB or Prometheus.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="before-this"></a>Before this<a class="hash-link" href="#before-this" title="Direct link to heading">#</a></h2><p>You should have seen log entries showing that data has been collected by Unifi Poller, and should be able to see that data is arriving in the database.</p><p>There are just a few remaining steps to complete the installation</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1---only-for-influxdb-users"></a>1 - Only for InfluxDB users<a class="hash-link" href="#1---only-for-influxdb-users" title="Direct link to heading">#</a></h2><p>Although InfluxDB is up and running, you need to set up the database which was referenced in the configuration. Get shell access to wherever it is and run the command <code>influx</code></p><p>Create the database:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE DATABASE unifi</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">USE unifi</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE USER unifipoller WITH PASSWORD &#x27;unifipoller&#x27; WITH ALL PRIVILEGES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">GRANT ALL ON unifi TO unifipoller</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Optionally - and this is a very sensible idea - set limits on how much data you wish to retain by implementing a retention policy. For example, to hold data for 32 days add the command</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE RETENTION POLICY retention_policy ON unifi DURATION 32d REPLICATION 1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>(If ever you need to reset the database it can be deleted by the command <code>DROP DATABASE unifi</code> and then recreated using the commands above.)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2---configuring-grafana-datasource"></a>2 - Configuring Grafana Datasource<a class="hash-link" href="#2---configuring-grafana-datasource" title="Direct link to heading">#</a></h2><p>Grafana needs to be set up to use the database that Poller is writing to as a source. Here we set out the steps for InfluxDB; the Prometheus steps are very similar</p><ul><li>Click Add your first data source on the home page you see after logon.</li><li>Select the influxdb option</li><li>Set the following fields:
Name = UniFi InfluxDB (or whatever name you want) and set to default
URL = http://influxdb1:8086
Database = unifi
Username = unifipoller
Password = unifipoller</li><li>No other fields need to be changed or set on this page.</li><li>Click Save &amp; Test</li><li>You should get green banner above the save and test that says &#x27;Data Source is Working&#x27;</li><li>To return to the homepage click the icon with 4 squares on the left nav-bar and select home</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3---import-grafana-dashboards"></a>3 - Import Grafana Dashboards<a class="hash-link" href="#3---import-grafana-dashboards" title="Direct link to heading">#</a></h2><p>This project provides a few Grafana dashboards. They are available on <a href="https://grafana.com/grafana/dashboards" target="_blank" rel="noopener noreferrer">Grafana.com</a>.</p><p>Keep in mind these dashboards are just examples. You should make a single dedicated folder in Grafana to keep all of them in, and copy the graphs to new dashboards that you want to maintain. From time to time I will release new features (like multi-site support and multi-controller support) that brings new benefits to the existing dashboards. When that happens I update them. Keeping an example set allows you to update too, inspect the changes, and apply them to your own custom dashboards.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="recommendations"></a>Recommendations<a class="hash-link" href="#recommendations" title="Direct link to heading">#</a></h3><ul><li>Import the provided dashboards into their own folder, so they&#x27;re easy to find.<ul><li>Do not make one folder per dashboard.</li><li>Make one folder for all of them.</li><li>The folder name cannot be the same as the dashboard names, or Grafana will throw an error.</li></ul></li><li>Changing the unique identifier allows you to re-import a dashboard, but this is not recommended.</li><li>Don&#x27;t edit them, instead:<ul><li>Copy these dashboards or graphs to your own.</li><li>Edit the copies to get the data how you want it.</li><li>Keeping the original dashboards unedited allows you to continue referencing them, and copying graphs out of them.</li><li>This also allows you to identify problems with them and open an Issue.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="import-dashboards"></a>Import Dashboards<a class="hash-link" href="#import-dashboards" title="Direct link to heading">#</a></h3><ul><li>Simply click the + on the left nav bar in Grafana and click Import.</li><li>Put in the ID for the dashboard (below) and click the blue Load button.</li><li>Select the InfluxDB or Prometheus data source you created previously.</li><li>Click the Green Import button on the last screen.</li></ul><p>Repeat this for each dashboard you want. The IDs for each database platform are below. You only need Prometheus or Influx, not both. Unless you really want both.</p><table><thead><tr><th>App</th><th>Prometheus ID</th><th>Influx ID</th><th>Get this if you...</th></tr></thead><tbody><tr><td>Client DPI</td><td><a href="https://grafana.com/grafana/dashboards/11310" target="_blank" rel="noopener noreferrer">11310</a></td><td><a href="https://grafana.com/grafana/dashboards/10419" target="_blank" rel="noopener noreferrer">10419</a></td><td>...enabled <code>save_dpi</code> in the config</td></tr><tr><td>Sites</td><td><a href="https://grafana.com/grafana/dashboards/11311" target="_blank" rel="noopener noreferrer">11311</a></td><td><a href="https://grafana.com/grafana/dashboards/10414" target="_blank" rel="noopener noreferrer">10414</a></td><td>...enabled <code>save_sites</code></td></tr><tr><td>USW</td><td><a href="https://grafana.com/grafana/dashboards/11312" target="_blank" rel="noopener noreferrer">11312</a></td><td><a href="https://grafana.com/grafana/dashboards/10417" target="_blank" rel="noopener noreferrer">10417</a></td><td>...have UniFi Switches</td></tr><tr><td>USG</td><td><a href="https://grafana.com/grafana/dashboards/11313" target="_blank" rel="noopener noreferrer">11313</a></td><td><a href="https://grafana.com/grafana/dashboards/10416" target="_blank" rel="noopener noreferrer">10416</a></td><td>...have a UniFi gateway (UDM-P, UDM, USG, ...)</td></tr><tr><td>UAP</td><td><a href="https://grafana.com/grafana/dashboards/11314" target="_blank" rel="noopener noreferrer">11314</a></td><td><a href="https://grafana.com/grafana/dashboards/10416" target="_blank" rel="noopener noreferrer">10415</a></td><td>...have UniFi Access Points</td></tr><tr><td>Clients</td><td><a href="https://grafana.com/grafana/dashboards/11315" target="_blank" rel="noopener noreferrer">11315</a></td><td><a href="https://grafana.com/grafana/dashboards/10418" target="_blank" rel="noopener noreferrer">10418</a></td><td>...love nano</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="dashboard-update-notes"></a>Dashboard Update Notes<a class="hash-link" href="#dashboard-update-notes" title="Direct link to heading">#</a></h4><p>When the dashboards are updated, you have a couple options to update them in Grafana. You can either import them and replace the existing ones (use the same unique identifier), or you can import them as fresh new dashboards by changing the unique identifier. This allows you to keep updating the provided dashboards while maintaining your own. From time to time the dashboards get new features, new graphs, new variables, etc. Giving yourself an easy way to import the updated dashboards provided by this project is ideal. You&#x27;re able to inspect the changes and apply them to your dashboards with this method.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/pollerdox/docs/ins9"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Config file and Environment variables</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/pollerdox/docs/ins11"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Loki Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-this" class="table-of-contents__link">Before this</a></li><li><a href="#1---only-for-influxdb-users" class="table-of-contents__link">1 - Only for InfluxDB users</a></li><li><a href="#2---configuring-grafana-datasource" class="table-of-contents__link">2 - Configuring Grafana Datasource</a></li><li><a href="#3---import-grafana-dashboards" class="table-of-contents__link">3 - Import Grafana Dashboards</a><ul><li><a href="#recommendations" class="table-of-contents__link">Recommendations</a></li><li><a href="#import-dashboards" class="table-of-contents__link">Import Dashboards</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/XNQSYwYH" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Project home</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/unifi-poller/unifi-poller" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021</div></div></div></footer></div>
<script src="/pollerdox/styles.6490030f.js"></script>
<script src="/pollerdox/runtime~main.d106c79f.js"></script>
<script src="/pollerdox/main.5a848fa0.js"></script>
<script src="/pollerdox/1.bbccf605.js"></script>
<script src="/pollerdox/2.7155cab2.js"></script>
<script src="/pollerdox/31.fd0fce12.js"></script>
<script src="/pollerdox/32.e766ad3f.js"></script>
<script src="/pollerdox/935f2afb.0213b905.js"></script>
<script src="/pollerdox/17896441.242c0b92.js"></script>
<script src="/pollerdox/a7630d7b.21b29e2d.js"></script>
</body>
</html>