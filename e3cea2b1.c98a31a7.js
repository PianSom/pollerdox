(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{89:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return u}));var r=n(3),i=n(7),a=(n(0),n(93)),o={id:"ins3",title:"Docker - using command line"},l={unversionedId:"ins3",id:"ins3",isDocsHomePage:!1,title:"Docker - using command line",description:"This page assumes that you have decided to start Unifi Poller with Docker using the command line",source:"@site/docs/ins3.md",slug:"/ins3",permalink:"/pollerdox/docs/ins3",version:"current",sidebar:"someSidebar",previous:{title:"Docker - using docker-compose",permalink:"/pollerdox/docs/ins2"},next:{title:"Docker - FAQs",permalink:"/pollerdox/docs/ins4"}},c=[{value:"Before this",id:"before-this",children:[]},{value:"Pull the images",id:"pull-the-images",children:[]},{value:"Configuring and starting the container",id:"configuring-and-starting-the-container",children:[{value:"Config file and Environment variables",id:"config-file-and-environment-variables",children:[]}]},{value:"Next steps",id:"next-steps",children:[]}],s={toc:c};function u(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"This page assumes that you have decided to start Unifi Poller with Docker using the command line"),Object(a.b)("p",null,"It is also assumed that you already have working versions of Grafana and InfluxDB/Prometheus"),Object(a.b)("h2",{id:"before-this"},"Before this"),Object(a.b)("p",null,"Make sure you have set up a user on your controller for Unifi Poller to use"),Object(a.b)("h2",{id:"pull-the-images"},"Pull the images"),Object(a.b)("p",null,"First pull the image from Docker Hub using"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"docker pull golift/unifi-poller\n")),Object(a.b)("p",null,"xxx note on tags\nxxx port no for unifios"),Object(a.b)("h2",{id:"configuring-and-starting-the-container"},"Configuring and starting the container"),Object(a.b)("p",null,"Unifi Poller's Docker container can be configured for use in two ways:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"by using environment variables or"),Object(a.b)("li",{parentName:"ul"},"via a configuration file")),Object(a.b)("p",null,"Which to use is a matter of personal choice. The environmental path has the advantage that all settings are in one place. The config file method has the advantage that Unifi Poller specific settings can be saved in the same shared Docker folder as the rest of the app's data."),Object(a.b)("p",null,"In either case, the variables to be set can be split into three categories:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Configuration of Unifi Poller iteslf"),Object(a.b)("li",{parentName:"ol"},"Configuration of the Unifi and the controller(s) (multiple controllers are permitted for different sites)"),Object(a.b)("li",{parentName:"ol"},"Configuration of the output database(s) (Unifi Poller will output to both InfluxDB and Prometheus if desired)")),Object(a.b)("p",null,"More documentation on the configuration options is included in the ","[sample configuration file]"," (",Object(a.b)("a",{parentName:"p",href:"https://github.com/unifi-poller/unifi-poller/blob/master/examples/up.conf.example"},"https://github.com/unifi-poller/unifi-poller/blob/master/examples/up.conf.example"),") on the repo"),Object(a.b)("h3",{id:"config-file-and-environment-variables"},"Config file and Environment variables"),Object(a.b)("h4",{id:"poller"},"poller"),Object(a.b)("p",null,"The poller section begins with the ",Object(a.b)("inlineCode",{parentName:"p"},"[poller]")," header and has the parameters below. These control overall behavior of the application."),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",{parentName:"tr",align:null},Object(a.b)("strong",{parentName:"th"},"ENV")),Object(a.b)("th",{parentName:"tr",align:null},Object(a.b)("strong",{parentName:"th"},"config")),Object(a.b)("th",{parentName:"tr",align:null},Object(a.b)("strong",{parentName:"th"},"type - default")),Object(a.b)("th",{parentName:"tr",align:null},Object(a.b)("strong",{parentName:"th"},"explanation")))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",{parentName:"tr",align:null},"UP_POLLER_DEBUG"),Object(a.b)("td",{parentName:"tr",align:null},"debug"),Object(a.b)("td",{parentName:"tr",align:null},"boolean - false"),Object(a.b)("td",{parentName:"tr",align:null},"turns on debug messages")))),Object(a.b)("p",null,"| UP_POLLER_QUIET \tquiet \tboolean - false \tturns off timer messages\n| UP_POLLER_PLUGINS_0 \tplugins \tfile list - empty \tadvanced! plugin file, use _1, _2, etc to add more"),Object(a.b)("p",null,"xxx insert tables of config/env variables from ",Object(a.b)("a",{parentName:"p",href:"https://github.com/unifi-poller/unifi-poller/wiki/Configuration"},"https://github.com/unifi-poller/unifi-poller/wiki/Configuration")),Object(a.b)("h4",{id:"alternative-1---using-environment-variables"},"Alternative 1 - Using environment variables"),Object(a.b)("p",null,"If you are using the command line and have decided to use environment variables then start the container using the following command (changed as necessary to pass other environment variables)"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},'docker run -e UP_UNIFI_DEFAULT_PASS="your-secret-pasword" -d  golift/unifi-poller:latest\n')),Object(a.b)("h4",{id:"alternative-2---using-a-configuration-file"},"Alternative 2 - Using a configuration file"),Object(a.b)("p",null,"Alternatively, if you choose to use a configuration file"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Copy this ",Object(a.b)("a",{parentName:"li",href:"https://github.com/unifi-poller/unifi-poller/blob/master/examples/up.conf.example"},"example config file")),Object(a.b)("li",{parentName:"ul"},"Edit it as necessary (in particular ensure that the ",Object(a.b)("inlineCode",{parentName:"li"},"[unifi]"),"/",Object(a.b)("inlineCode",{parentName:"li"},"user")," and ",Object(a.b)("inlineCode",{parentName:"li"},"pass")," variables are set)"),Object(a.b)("li",{parentName:"ul"},"Save it as ",Object(a.b)("inlineCode",{parentName:"li"},"unifi-poller.conf")," in the local location you use for Docker storage in a folder called ",Object(a.b)("inlineCode",{parentName:"li"},"unifi-poller"))),Object(a.b)("p",null,"If all has worked then after it has downloaded and started you should start seeing lines like"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"unifi-poller    | 2020/06/18 12:08:50 [INFO] UniFi Metrics Recorded. Sites: 1, Clients: 67, UAP: 6, USG/UDM: 1, USW: 5, IDS Events: 0, Points: 1837, Fields: 11307, Errs: 0, Elapsed: 599ms\n")),Object(a.b)("p",null,"If you don't see this then go back and check what you have done so far"),Object(a.b)("h2",{id:"next-steps"},"Next steps"),Object(a.b)("p",null,"Go to the section Configuration / Final steps"))}u.isMDXComponent=!0},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var r=n(0),i=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=i.a.createContext({}),u=function(e){var t=i.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},b=function(e){var t=u(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},f=i.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),b=u(n),f=r,d=b["".concat(o,".").concat(f)]||b[f]||p[f]||a;return n?i.a.createElement(d,l(l({ref:t},s),{},{components:n})):i.a.createElement(d,l({ref:t},s))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=f;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<a;s++)o[s]=n[s];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}f.displayName="MDXCreateElement"}}]);